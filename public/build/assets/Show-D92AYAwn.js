import{m as b,f as c,o as u,i as E,B as H,b as t,y as N,d as C,C as z,D as A,E as j,u as x,G as D,H as F,h as B,s as W,k as q,I as K,F as M,J as O,n as v,g as Z,t as w,a as m,w as G,j as P,l as Q,Z as X}from"./app-pyZ0Omps.js";const Y={id:"page-footer",class:"fixed bottom-0 end-0 start-0 items-center border-t border-slate-200/75 bg-white lg:start-80"},J=["onKeydown"],R={__name:"Footer",setup(e,{emit:s}){const o=b(""),i=b(!1),a=s,d=h=>{if(i.value&&o.value.length){o.value=o.value+`
`;return}o.value.length&&(a("valid",o.value),o.value="",n())};let r=null;const g=()=>{clearTimeout(r),a("typing",!0),r=setTimeout(n,3e3)},n=()=>{clearTimeout(r),a("typing",!1)};return(h,l)=>(u(),c("footer",Y,[E(t("textarea",{rows:"2","onUpdate:modelValue":l[0]||(l[0]=p=>o.value=p),onKeydown:[N(C(d,["prevent"]),["enter"]),l[1]||(l[1]=C(p=>i.value=!0,["shift"])),g],onKeyup:l[2]||(l[2]=p=>i.value=!1),class:"w-11/12 rounded-lg border-0 px-5 ml-4 py-4 focus:border-indigo-500 focus:ring focus:ring-indigo-500/75",placeholder:"Type a new message and hit enter.."},null,40,J),[[H,o.value]])]))}},ee={id:"page-header",class:"fixed end-0 start-0 top-0 z-30 flex h-20 flex-none items-center border-b border-slate-200/75 bg-white/80 backdrop-blur-sm lg:start-80 lg:hidden"},te={class:"container mx-auto flex justify-between px-4 lg:px-8 xl:max-w-7xl"},se={class:"flex items-center gap-2"},oe=t("svg",{class:"hi-solid hi-menu-alt-1 inline-block h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ae=[oe],re=z('<div class="flex items-center gap-2"><a href="javascript:void(0)" class="group inline-flex items-center gap-2 text-lg font-bold tracking-wide text-slate-800 transition hover:opacity-75 active:opacity-100"><svg class="hi-mini hi-chat-bubble-left-right inline-block h-5 w-5 text-indigo-500 transition ease-out group-hover:-rotate-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M3.505 2.365A41.369 41.369 0 019 2c1.863 0 3.697.124 5.495.365 1.247.167 2.18 1.108 2.435 2.268a4.45 4.45 0 00-.577-.069 43.141 43.141 0 00-4.706 0C9.229 4.696 7.5 6.727 7.5 8.998v2.24c0 1.413.67 2.735 1.76 3.562l-2.98 2.98A.75.75 0 015 17.25v-3.443c-.501-.048-1-.106-1.495-.172C2.033 13.438 1 12.162 1 10.72V5.28c0-1.441 1.033-2.717 2.505-2.914z"></path><path d="M14 6c-.762 0-1.52.02-2.271.062C10.157 6.148 9 7.472 9 8.998v2.24c0 1.519 1.147 2.839 2.71 2.935.214.013.428.024.642.034.2.009.385.09.518.224l2.35 2.35a.75.75 0 001.28-.531v-2.07c1.453-.195 2.5-1.463 2.5-2.915V8.998c0-1.526-1.157-2.85-2.729-2.936A41.645 41.645 0 0014 6z"></path></svg><span>Inertia<span class="font-medium text-indigo-600">Chat</span></span></a></div><div class="flex items-center gap-2"><a href="javascript:void(0)" class="inline-flex items-center justify-center gap-2 rounded-lg border border-slate-300 bg-white px-2.5 py-2 font-semibold leading-6 text-slate-800 shadow-sm hover:border-slate-300 hover:bg-slate-100 hover:text-slate-800 hover:shadow focus:outline-none focus:ring focus:ring-slate-500/25 active:border-white active:bg-white active:shadow-none"><svg class="hi-solid hi-user-circle inline-block h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"></path></svg></a></div>',2),ne={__name:"Header",props:{handleSidebar:{type:Function,required:!0},mobileSidebarOpen:Boolean},setup(e){return(s,o)=>(u(),c("header",ee,[t("div",te,[t("div",se,[t("button",{type:"button",onClick:o[0]||(o[0]=i=>e.handleSidebar(!0)),class:"inline-flex items-center justify-center gap-2 rounded-lg border border-slate-300 bg-white px-2.5 py-2 font-semibold leading-6 text-slate-800 shadow-sm hover:border-slate-300 hover:bg-slate-100 hover:text-slate-800 hover:shadow focus:outline-none focus:ring focus:ring-slate-500/25 active:border-white active:bg-white active:shadow-none"},ae)]),re])]))}},T=A("messages",{state:()=>({page:1,messages:[],isLoaded:!1}),actions:{fetchMessages(e,s=1){j.get(`/rooms/${e}/messages?page=${s}`).then(o=>{this.messages=[...this.messages,...o.data.data],this.page=o.data.meta.current_page,this.isLoaded=!0})},fetchPreviousMessages(e){this.fetchMessages(e,this.page+1)},storeMessage(e,s){j.post(`/rooms/${e}/messages`,s,{headers:{"X-Socket-Id":Echo.socketId()}}).then(o=>{this.pushMessage(o.data)})},pushMessage(e){this.messages.pop(),this.messages=[e,...this.messages]}},getters:{allMessages(e){return e.messages},getIsLoaded(e){return e.isLoaded}}});function ie(e){return D()?(F(e),!0):!1}function U(e){return typeof e=="function"?e():x(e)}const le=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const de=e=>e!=null,_=()=>{};function y(e){var s;const o=U(e);return(s=o==null?void 0:o.$el)!=null?s:o}const ce=le?window:void 0;function ue(){const e=b(!1),s=K();return s&&q(()=>{e.value=!0},s),e}function pe(e){const s=ue();return B(()=>(s.value,!!e()))}function he(e,s,o={}){const{root:i,rootMargin:a="0px",threshold:d=.1,window:r=ce,immediate:g=!0}=o,n=pe(()=>r&&"IntersectionObserver"in r),h=B(()=>{const f=U(e);return(Array.isArray(f)?f:[f]).map(y).filter(de)});let l=_;const p=b(g),V=n.value?W(()=>[h.value,y(i),p.value],([f,L])=>{if(l(),!p.value||!f.length)return;const S=new IntersectionObserver(s,{root:y(L),rootMargin:a,threshold:d});f.forEach(k=>k&&S.observe(k)),l=()=>{S.disconnect(),l=_}},{immediate:g,flush:"post"}):_,$=()=>{l(),V(),p.value=!1};return ie($),{isSupported:n,isActive:p,pause(){l(),p.value=!1},resume(){p.value=!0},stop:$}}const ge={id:"page-content",class:"absolute inset-0"},fe={class:"container mx-auto space-y-6 space-y-reverse px-4 py-24 lg:p-8 lg:pb-28 xl:max-w-7xl flex flex-col-reverse h-full overflow-y-auto"},me={key:0,class:"text-sm font-medium text-slate-500"},ve={__name:"Messages",props:{room:{type:Object,required:!0}},setup(e){const s=b(null),o=e,i=T();return he(s,([{isIntersecting:a}],d)=>{a&&i.getIsLoaded&&i.fetchPreviousMessages(o.room.slug)}),(a,d)=>(u(),c("main",ge,[t("div",fe,[(u(!0),c(M,null,O(x(i).allMessages,r=>(u(),c("div",{key:r.id,class:v(["flex w-5/6 flex-col gap-2 lg:w-2/3 xl:w-1/3",{"items-start":r.user.id!=a.$page.props.auth.user.id,"items-end ms-auto":r.user.id==a.$page.props.auth.user.id}])},[r.user.id!=a.$page.props.auth.user.id?(u(),c("p",me,w(r.user.name),1)):Z("",!0),t("div",{class:v(["rounded-2xl px-5 py-3 bg-gray-100",{"bg-indigo-600 text-white rounded-br-none":r.user.id==a.$page.props.auth.user.id,"rounded-tl-none":r.user.id!=a.$page.props.auth.user.id}])},[t("p",{class:v(["font-semibold",{"text-white":r.user.id==a.$page.props.auth.user.id,"text-slate-500":r.user.id!=a.$page.props.auth.user.id}])},w(r.content),3)],2),t("p",{class:v(["text-xs font-medium text-slate-500",{"text-right":r.user.id==a.$page.props.auth.user.id}])},w(r.created_at),3)],2))),128)),t("div",{ref_key:"target",ref:s,class:"translate-y-20"},null,512)])]))}},I=A("users",{state:()=>({users:[]}),actions:{setUsers(e){this.users=e},addUser(e){typeof this.users.find(s=>s.id===e.id)<"u"||this.users.push(e)},removeUser(e){this.users=this.users.filter(s=>s.id!==e.id)},setTyping(e){this.users.find(s=>s.id==e.user_id).typing=e.typing}},getters:{allUsers(e){return e.users},count(e){return e.users.length}}}),be={class:"flex h-20 w-full flex-none items-center justify-between pe-2 ps-8"},xe=z('<a href="javascript:void(0)" class="group inline-flex items-center gap-2 text-lg font-bold tracking-wide text-slate-800 transition hover:opacity-75 active:opacity-100 lg:justify-center"><svg class="hi-mini hi-chat-bubble-left-right inline-block h-5 w-5 text-indigo-500 transition ease-out group-hover:-rotate-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M3.505 2.365A41.369 41.369 0 019 2c1.863 0 3.697.124 5.495.365 1.247.167 2.18 1.108 2.435 2.268a4.45 4.45 0 00-.577-.069 43.141 43.141 0 00-4.706 0C9.229 4.696 7.5 6.727 7.5 8.998v2.24c0 1.413.67 2.735 1.76 3.562l-2.98 2.98A.75.75 0 015 17.25v-3.443c-.501-.048-1-.106-1.495-.172C2.033 13.438 1 12.162 1 10.72V5.28c0-1.441 1.033-2.717 2.505-2.914z"></path><path d="M14 6c-.762 0-1.52.02-2.271.062C10.157 6.148 9 7.472 9 8.998v2.24c0 1.519 1.147 2.839 2.71 2.935.214.013.428.024.642.034.2.009.385.09.518.224l2.35 2.35a.75.75 0 001.28-.531v-2.07c1.453-.195 2.5-1.463 2.5-2.915V8.998c0-1.526-1.157-2.85-2.729-2.936A41.645 41.645 0 0014 6z"></path></svg><span>Inertia<span class="font-medium text-indigo-600">Chat</span></span></a>',1),we={class:"lg:hidden"},_e=t("svg",{class:"hi-solid hi-x -mx-1 inline-block h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),ye=[_e],Me={class:"grow space-y-2 ps-4 pt-2"},$e={class:"relative flex-none"},Se=["src"],ke=t("span",{class:"absolute bottom-0 end-0 h-3 w-3 rounded-full border-2 border-white bg-emerald-500 shadow-sm"},null,-1),Ce={class:"grow"},je={class:"mb-0.5 line-clamp-1 text-sm font-bold"},ze={class:"line-clamp-1 text-xs font-medium text-slate-500"},Ae={class:"flex-none self-start"},Be=t("p",{class:"text-xs font-medium text-slate-400"},"Now",-1),Oe=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"},null,-1),Te=[Oe],Ue={class:"flex-none space-y-2 px-4 pb-2"},Ie=t("div",{class:"relative flex-none"},[t("img",{src:"https://images.unsplash.com/photo-1528892952291-009c663ce843?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=160&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTY2ODc1OTQ0OQ&ixlib=rb-4.0.3&q=80&utm_campaign=api-credit&utm_medium=referral&utm_source=unsplash_source&w=160",alt:"User Avatar",class:"h-11 w-11 rounded-full border-2 border-white/50"})],-1),Ve=t("div",{class:"grow"},[t("p",{class:"mb-0.5 line-clamp-1 text-sm font-bold"}," My Account "),t("p",{class:"line-clamp-1 text-xs font-medium text-slate-500"}," @john.doe ")],-1),Le={__name:"Nav",props:{handleSidebar:{type:Function,required:!0},mobileSidebarOpen:Boolean},setup(e){const s=e,o=I();return(i,a)=>(u(),c("nav",{id:"page-sidebar",class:v(["fixed bottom-0 start-0 top-0 z-50 flex h-full w-80 flex-col overflow-auto bg-slate-200 transition-transform duration-500 ease-out lg:translate-x-0 lg:shadow-none ltr:lg:translate-x-0 rtl:lg:translate-x-0 ltr:-translate-x-full rtl:translate-x-full lg:flex",{"ltr:-translate-x-full rtl:translate-x-full hidden":!s.mobileSidebarOpen,"translate-x-0 shadow-lg block":s.mobileSidebarOpen}]),"aria-label":"Main Sidebar Navigation"},[t("div",be,[xe,t("div",we,[t("button",{type:"button",onClick:a[0]||(a[0]=d=>e.handleSidebar(!1)),class:"flex h-10 w-10 items-center justify-center text-slate-400 hover:text-slate-600 active:text-slate-400"},ye)])]),t("div",Me,[(u(!0),c(M,null,O(x(o).allUsers,d=>(u(),c("a",{key:d.id,href:"javascript:void(0)",class:"flex items-center gap-3 border-indigo-500 bg-white px-3 py-4 shadow-sm ltr:rounded-l ltr:border-l-4 rtl:rounded-r rtl:border-r-4"},[t("div",$e,[t("img",{src:d.avatar,alt:"User Avatar",class:"h-11 w-11 rounded-full border-2 border-white/50"},null,8,Se),ke]),t("div",Ce,[t("p",je,w(d.name),1),t("p",ze,w(d.email),1)]),t("div",Ae,[Be,(u(),c("svg",{class:v(["mt-3 size-6 animate-bounce opacity-0 transition-opacity",{"opacity-100":d.typing}]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Te,2))])]))),128))]),t("div",Ue,[m(x(P),{href:i.route("dashboard"),class:"flex items-center gap-3 rounded border-l-4 border-transparent px-3 py-4 hover:border-indigo-300 hover:bg-white/50 active:border-indigo-500 active:bg-white active:shadow-sm"},{default:G(()=>[Ie,Ve]),_:1},8,["href"])])],2))}},Ee={id:"page-container",class:"relative mx-auto h-screen min-w-[320px] bg-white lg:ms-80"},Ne={__name:"Show",props:{room:{type:Object,required:!0}},setup(e){const s=e;Q(()=>{Echo.leave(`room.${s.room.id}`)});const o=T(),i=I(),a=b(!1),d=n=>{a.value=n},r=n=>{o.storeMessage(s.room.slug,n)},g=Echo.join(`room.${s.room.id}`);return g.listen("MessageCreated",n=>{o.pushMessage(n)}).here(n=>i.setUsers(n)).joining(n=>i.addUser(n)).leaving(n=>i.removeUser(n)).listenForWhisper("typing",n=>{i.setTyping(n)}),o.fetchMessages(s.room.slug),(n,h)=>(u(),c(M,null,[m(x(X),{title:"Messages"}),t("div",null,[t("div",Ee,[m(Le,{"mobile-sidebar-open":a.value,"handle-sidebar":d},null,8,["mobile-sidebar-open"]),m(ne,{"mobile-sidebar-open":a.value,"handle-sidebar":d},null,8,["mobile-sidebar-open"]),m(ve,{room:e.room},null,8,["room"]),m(R,{onValid:h[0]||(h[0]=l=>r({content:l})),onTyping:h[1]||(h[1]=l=>x(g).whisper("typing",{user_id:n.$page.props.auth.user.id,typing:l}))})])])],64))}};export{Ne as default};
